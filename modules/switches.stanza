#use-added-syntax(jitx)
defpackage ocdb/solvers/pfet-switch:
  import core
  import collections
  import math
  import jitx
  import jitx/commands
  import ocdb/defaults
  import ocdb/generic-components
  import ocdb/generator-utils
  import ocdb/checks
  import ocdb/design-vars
  import ocdb/db-parts

; Assumes: all objects referenced to common ground
; Low switching frequency
; Non inductive load
; input voltage is always first thing on in a circuit (logic-out is high impedance before input is on, output can never be on while input is off)
; Examples: 
; Vbus >> vlogic (48Vbus, 5V logic)
; Vbus > vlogic (24Vbus, 1.8V logic) Gth issue?
; Vbus > vlogic (5Vbus, 2.7V logic)
; Vbus <= vlogic (5Vbus 5V logic)
; Vbus << Vlogic (1.8Vbus, 5Vlogic) Gth issue
; BLE-mote Example: v-bus 5.0 5.0 5.3, i-out-max 0.075, voh 0.8*vdd(3.3)=2.64, vol 0.1*vdd=0.33, i-logic-max=0.020, v-out-min = 4.5, i-out-min =0.025
public defn pfet-switch (in:JITXObject, gate:JITXObject, switched:JITXObject,
                             v-bus: [Double, Double, Double],
                             i-out: [Double, Double, Double],
                             v-out-min: [Double, Double, Double],
                             v-logic-out-hi: [Double,Double,Double],
                             v-logic-out-low: [Double,Double,Double],
                             i-ds: Double,
                             i-logic-max: Double,
                             continuous: Booleon, ; assume true, if false, look for Current pulsed
                             heatsink-allowed: Booleon,
                             max-height: Double,
                             mounting: String|False, ; "smd" "th" "press-fit"
                             optimize-for: String ; cost, on resistance, off leakage, area, weight, 
                             ) -> VoltageDividerSolution|False:
; Optimize for: on leakage, off leakage, Rds-on, 

; Filter columns available: https://www.digikey.com/en/products/filter/transistors-fets-mosfets-single/278
; filter in stock, active = true, exclude marketplace product
; filter P-Channel FETs channel="P"
; https://www.digikey.com/en/products/filter/transistors-fets-mosfets-single/278?s=N4IgjCBcoGwAwyqAxlAZgQwDYGcCmANCAPZQDaIAzABwCsYclIAukQA4AuUIAyhwE4BLAHYBzEAF8iYAJzUZSEKkiZchEuRBwW7LpF4CR4qSAC0AJkXKBAV3WlIFWiwmugA
; filter id >= i-ds ; id-25c >= 0.075
; filter Vds >v-bus max vdss > 5.0
; https://www.digikey.com/en/products/filter/transistors-fets-mosfets-single/278?s=N4IgjCBcoGwAwyqAxlAZgQwDYGcCmANCAPZQDaIAzABwCsYclIAukQA4AuUIAyhwE4BLAHYBzEAF8i8akhCpImXIRLkQAJgDsmgJzVNIIup1h11REZ3q4AFgiWdMHQenVqNpq-e1DId3FoXPxsA2SJzdRsLEB04BGiTTXdfHRtAsPA4ygZfBlp3DLAim2SiYvobXLA0sB8y2sodT3AwajBKZqLYmHVckJt1OvB%2B9WjqhsKauj7qQfthuiLc2gCTZbhqDuWnAe3UztodyrL4Sjtc092TuE0YMZ6OuAubD2PwWbMxuhtNIdbNShOXLURwbXJWRy9Mp6ALzawbLS%2BdTtUbRZG0KxPIxgTQ4qEaVq0EJI5FaOFzWZIwG-ZrqamBJEhVpvSJwVpoux02kDBDc7LORkeIFGKIlHRI2j5fISqXioz5W5DQY6WIZZWxOUaGB5fGjOm4pEPTQsmBnQG%2BEraayGmypJWaYzSohpVIwFkOyFI7QDTWfdTGJEgkFokx3N5dK1VZwAqPaIZpQ7NBMweOSu4WyUYi12NbOlbGi2bUogH7R3wrWJDWhmMDRF1RKs1jKS0Lllba8svErl42NQtgHQMoiBF7zDF0jKW25veBWeazum%2BHoAv4wW7tfuDzpr7Wr9djQY3P6RVJBUxr1q5UYO%2Bbnh340zubRXpLpsrGfS37JE8MdTm5DpAIAqI4HxKJaw7MozngP5oIQAD4CWKCHQdJE2QeTdDjQ2tsmw01OlxNwz0ItxcgdYNN27MpyJVMjjDiMjGjXMjbVNFjnAfW4NlvLjzDIlCsXAK0Y2o2YYEKJItHDXRVmBLJBNaLJOL0S8jC0awghKAd6BJG8lXUnE0NoM5fQCSgdKMBAAk0-QARZBBqHgyzxJySzjWrNDZheTzBiVOArBEjR-K0NUGCKWkwsM7EHKVBhxN9H47MZbQaGS40bO0aoqW4wS6W43VskoXQqXaYs6QHG4So1Klyt9SgzANIx6v0NFmuYproMnUZ-KVP9Aq5KIgjpJkWTOHMqVtSIJvMXK7jMNU7koWwLW61IJQYVD5VqKKNGrH41T2xyJWMN9duMYr5UBRFLtNOEiXQiUQmRR6BjRH9rt2n5znlL6WUc3E0X%2Bs5CytJUnDMWbHA3IwnG1OtbJ6Q0VTaJG9DRTRbGhks4ZTL1bH9L0USG3F6t9XEAVyh0AhZJoVyRWmLI0BndVmKxAeMcyQeNXLNnoJNYhKP6XgDIx3A8FmVhFjQ6EYQHqySXwlttAJFdsaqiCVppfUcbI1R161LBTSV6aN7WMaopmMeNywAVGenbkay3EntzF6baAtLH8EN3CQkAHR%2BZp-YVoh-eLB0Vgyf3vpLNpByGI39CXfJfZTWZ521C27mMt5dFs3xc8pEO9FzP2VSykP5fxX5q-zwJ4FrnX89NYO-HE4lwnE5880cj7ZjM3xZkaDIxLY8JUTeVm%2BKIOcPBSZEu78Gb8TcGCB9iTaY8y-FHCzlI7kdneQT3jGEnM2JclA4zOkvwK9FLFIClvG4wwv7QnMyH52syYzaiqZE9AvoOA2mQgG3lqFYTo7RbZRheJMawo9hjWHPmUKIkQ-higugsMufRYigT6OJI6KCT6FHoJmZYtREZlB-Ag2omwW60KessfIjhthLVvNqcKFwig7RwopLhPsLjGWeicbOq4eimAuG6d%2BrRzLANaNUC27I6QPjcBVcENAzDqM2JqV4eg-iOFtHCNkIRcoKLwdibQLC1KgW8mpAcaQSTCzRJEAYQ1Bg1yanGbkvIlR2G1LlQ4PRZrjBNNWCRRhbjuy9EkLMET9C2OlifOE%2BgEC6hVBieYbCPCCSWrrfE4l6CCQxto-O1hYl%2BwdAguhpFp5pASUUaykxSF1iCecVgIBODcD4EIMQkhoRH2gPIdA2B8BEFIJACgTx2mdMgLwAQIhxBSBAAAWl6IMhQAgACuKhxkUB8MwCQhygA
; filter Vgth < Vbus-min ; vgsth < ? AND id-vgsth < i-out-min
; https://www.digikey.com/en/products/filter/transistors-fets-mosfets-single/278?s=N4IgjCBcoGwAwyqAxlAZgQwDYGcCmANCAPZQDaIAzABwCsYclIAukQA4AuUIAyhwE4BLAHYBzEAF8i8akhCpImXIRLkQAJgDsmgJzVNIIup1h11REZ3q4AFgiWdMHQenVqNpq-e1DId3FoXPxsA2SJzdRsLEB04BGiTTXdfHRtAsPA4ygZfBlp3DLAim2SiYvobXLA0sB8y2sodT3AwajBKZqLYmHVckJt1OvB%2B9WjqhsKauj7qQfthuiLc2gCTZbhqDuWnAe3UztodyrL4Sjtc092TuE0YMZ6OuAubD2PwWbMxuhtNIdbNShOXLURwbXJWRy9Mp6ALzawbLS%2BdTtUbRZG0KxPIxgTQ4qEaVq0EJI5FaOFzWZIwG-ZrqamBJEhVpvSJwVpoux02kDBDc7LORkeIFGKIlHRI2j5fISqXioz5W5DQY6WIZZWxOUaGB5fGjOm4pEPTQsmBnQG%2BEraayGmypJWaYzSohpVIwFkOyFI7QDTWfdTGJEgkFokx3N5dK1VZwAqPaIZpQ7NBMweOSu4WyUYi12NbOlbGi2bUogH7R3wrWJDWhmMDRF1RKs1jKS0Lllba8svErl42NQtgHQMoiBF7zDF0jKW25veBWeazum%2BHoAv4wW7tfuDzpr7Wr9djQY3P6RVJBUxr1q5UYO%2Bbnh340zubRXpLpsrGfS37JE8MdTm5DpAIAqI4HxKJaw7MozngP5oIQAD4CWKCHQdJE2QeTdDjQ2tsmw01OlxNwz0ItxcgdYNN27MpyJVMjjDiMjGjXMjbVNFjnAfW4NlvLjzDIlCsXAK0Y2o2YYEKJItHDXRVmBLJBNaLJOL0S8jC0awghKAd6BJG8lXUnE0NoM5fQCSgdKMBAAk0-QARZBBqHgyzxJySzjWrNDZheTzBiVOArBEjR-K0NUGCKWkwsM7EHKVBhxN9H47MZbQaGS40bO0aoqW4wS6W43VskoXQqXaYs6QHG4So1Klyt9SgzANIx6v0NFmuYproMnUZ-KVP9Aq5KIgjpJkWTOHMqVtSIJvMXK7jMNU7koWwLW61IJQYVD5VqKKNGrH41T2xyJWMN9duMYr5UBRFLtNOEiXQiUQmRR6BjRH9rt2n5znlL6WUc3E0X%2Bs5CytJUnDMWbHA3IwnG1OtbJ6Q0VTaJG9DRTRbGhks4ZTL1bH9L0USG3F6t9XEAVyh0AhZJoVyRWmLI0BndVmKxAeMcyQeNXLNnoJNYhKP6XgDIx3A8FmVhFjQ6EYQHqySXwlttAJFdsaqiCVppfUcbI1R161LBTSV6aN7WMaopmMeNywAVGenbkay3EntzF6baAtLH8EN3CQkAHR%2BZp-YVoh-eLB0Vgyf3vpLNpByGI39CXfJfZTWZ521C27mMt5dFs3xc8pEO9FzP2VSykP5fxX5q-zwJ4FrnX89NYO-HE4lwnE5880cj7ZjM3xZkaDIxLY8JUTeVm%2BKIOcPBSZEu78Gb8TcGCB9iTaY8y-FHCzlI7kdneQT3jGEnM2JclA4zOkvwK9FLFIClvG4wwv7QnMyH52syYzaiqZE9AvoOA2mQgG3lqFYTo7RbZRheJMawo9hjWHPmUKIkQ-higugsMufRYigT6OJI6KCT6FHoJmZYtREZlB-Ag2omwW60KessfIjhthLVvNqcKFwig7RwopLhPsLjGWeicbOq4eimAuG6d%2BrRzLANaNUC27I6QPjcBVcENAzDqM2JqV4eg-iOFtHCNkIRcoKLwdibQLC1KgW8mpAcaQSTCzRJEAYQ1Bg1yanGbkvIlR2G1LlQ4PRZrjBNNWCRRhbjuy9EkLMET9C2OlifOE%2BgEC6hVBieYbCPCCSWrrfE4l6CCQxto-O1hYl%2BwdAguhpFp5pASUUaykxSF1iCecVgIBODcD4EIMQkh3zmmgPIdA2B8BEFIJACg1g6AIP9CEqkGNf7yhgmDNB7p6rAK0L8LCos3T1UDG6WeOy6n7MSvTYKSoVT0Xpk0X2RUTBDCWuVToUziymA2AA98-lo5vKhlefy9dPl6C6mYMCddJyBAFM6H4H1LS1hBsIzeVxEUZWMiDDyzoWrxlUZpY0U8QD0AaOWIoAL8XZHMaSoo%2BJMy0WHIcKaw59hUv2POUwwC0i4gST0Jo0QuV9hOPE8MnciQXBag%2BAh0jxWalrKowoBC%2BXgAIcKBVbgUb8pMApeKUtTDVlSu%2BYyDF3xOGFYawcZ5RiDilVoNkD4GpyLYaq8A9rCiPM0VBUCwM3VcgAtYLV9Uereu4QGwYAEihDkdVdWCV0pVnDEghUkcbFlBVGInSyVqFJUwNUJeEBFrC6qElIiSBzC3gRJHQDZZhAj6TLeSOgHyNB%2BiGhsH8nlJRMHaZ0yAvABAiHEFIcAxc5AKCUKM1QEyQBPHbVwTt3Se19JAAAWl6IMhQAgACuKhxkUB8MwCQu6gA

; filter packages based on top layer copper min width rules (how?)
; filter mounting type

; if optimize for cost
; sort by cost, pick lowest cost item
; https://www.digikey.com/en/products/detail/nxp-usa-inc/NX3008PBKMB-315/12599082

; if optimize by on leakage
; sort by Rds On (max), pick smallest value THIS MAY NOT BE TRUE SINCE IS VOLTAGE AND CURRENT DEPENDANT
; https://www.digikey.com/en/products/detail/toshiba-semiconductor-and-storage/TPH1R712MD-L1Q/5323102
; Is this correct or changes depends on Vgs and what is Vgs and i relationship?

; if optimize by off leakage
; filter FET Feature = standard (no body diode) & -
; filter Vds >2 * v-bus max (setup version is 1 *)
; https://www.digikey.com/en/products/filter/transistors-fets-mosfets-single/278?s=N4IgjCBcoGwAwyqAxlAZgQwDYGcCmANCAPZQDaIAzABwCsYclIAukQA4AuUIAyhwE4BLAHYBzEAF8i8akhCpImXIRLkQAJgDsmgJzVNIIup1h11REZ3q4AFgiWdMHQenVqNpq-e1DId3FoXPxsA2SJzdRsLEB04BGiTTXdfHRtAsPA4ygZfBlp3DLAim2SiYvobXLA0sB8y2sodT3AwajBKZqLYmHVckJt1OvB%2B9WjqhsKauj7qQfthuiLc2gCTZbhqDuWnAe3UztodyrL4Sjtc092TuE0YMZ6OuAubD2PwWbMxuhtNIdbNShOXLURwbXJWRy9Mp6ALzawbLS%2BdTtUbRZG0KxPIxgTQ4qEaVq0EJI5FaOFzWZIwG-ZrqamBJEhVpvSJwVpoux02kDBDc7LORkeIFGKIlHRI2j5fISqXioz5W5DQY6WIZZWxOUaGB5fGjOm4pEPTQsmBnQG%2BEraayGmypJWaYzSohpVIwFkOyFI7QDTWfdTGJEgkFokx3N5dK1VZwAqPaIZpQ7NBMweOSu4WyUYi12NbOlbGi2bUogH7R3wrWJDWhmMDRF1RKs1jKS0Lllba8svErl42NQtgHQMoiBF7zDF0jKW25veBWeazum%2BHoAv4wW7tfuDzpr7Wr9djQY3P6RVJBUxr1q5UYO%2Bbnh340zubRXpLpsrGfS37JE8MdTm5DpAIAqI4HxKJaw7MozngP5oIQAD4CWKCHQdJE2QeTdDjQ2tsmw01OlxNwz0ItxcgdYNN27MpyJVMjjDiMjGjXMjbVNFjnAfW4NlvLjzDIlCsXAK0Y2o2YYEKJItHDXRVmBLJBNaLJOL0S8jC0awghKAd6BJG8lXUnE0NoM5fQCSgdKMBAAk0-QARZBBqHgyzxJySzjWrNDZheTzBiVOArBEjR-K0NUGCKWkwsM7EHKVBhxN9H47MZbQaGS40bO0aoqW4wS6W43VskoXQqXaYs6QHG4So1Klyt9SgzANIx6v0NFmuYproMnUZ-KVP9Aq5KIgjpJkWTOHMqVtSIJvMXK7jMNU7koWwLW61IJQYVD5VqKKNGrH41T2xyJWMN9duMYr5UBRFLtNOEiXQiUQmRR6BjRH9rt2n5znlL6WUc3E0X%2Bs5CytJUnDMWbHA3IwnG1OtbJ6Q0VTaJG9DRTRbGhks4ZTL1bH9L0USG3F6t9XEAVyh0AhZJoVyRWmLI0BndVmKxAeMcyQeNXLNnoJNYhKP6XgDIx3A8FmVhFjQ6EYQHqySXwlttAJFdsaqiCVppfUcbI1R161LBTSV6aN7WMaopmMeNywAVGenbkay3EntzF6baAtLH8EN3CQkAHR%2BZp-YVoh-eLB0Vgyf3vpLNpByGI39CXfJfZTWZ521C27mMt5dFs3xc8pEO9FzP2VSykP5fxX5q-zwJ4FrnX89NYO-HE4lwnE5880cj7ZjM3xZkaDIxLY8JUTeVm%2BKIOcPBSZEu78Gb8TcGCB9iTaY8y-FHCzlI7kdneQT3jGEnM2JclA4zOkvwK9FLFIClvG4wwv7QnMyH52syYzaiqZE9AvoOA2mQgG3lqFYTo7RbZRheJMawo9hjWHPmUKIkQ-higugsMufRYigT6OJI6KCT6FHoJmZYtREZlB-Ag2omwW60KessfIjhthLVvNqcKFwig7RwopLhPsLjGWeicbOq4eimAuG6d%2BrRzLANaNUC27I6QPjcBVcENAzDqM2JqV4eg-iOFtHCNkIRcoKLwdibQLC1KgW8mpAcaQSTCzRJEAYQ1Bg1yanGbkvIlR2G1LlQ4PRZrjBNNWCRRhbjuy9EkLMET9C2OlifOE%2BgEC6hVBieYbCPCCSWrrfE4l6CCQxto-O1hYl%2BwdAguhpFp5pASUUaykxSF1iCecVgIBODcD4EIMQkhp5ZmgPIdA2B8BEFIJACgEB2mdMgLwAQIhxBSHAHSRAgyFBKFGaoCZQU6AIP9CEqkGNf7yhgmDNB7p6rAK0L8LCos3T1UDG6Wedy6mPMSvTYKSoVT0Xpk0X2RUTBDCWuVTo1g3DhjBQA98-lo6mH8pBZZ8KFJIJqSWf0hcSx10nIEAUzofgfUtLWEGwjN5XFJRlYyIMPLOhavGVRmljRTxAPQBo5Yij12HNkcxzLsjhOZZKWiw5DhTWHPsfEGIPDzlMMAtIuIEk9CaNEBVfYTjxPDJ3IkFwWoPgIdI3VmpayqMKAQlV4ACHCjNW4FGqqTAKXilLUw1ZUrvmMgxd8ThNXusHGeUYg4DVaDZA%2BBqci2HWvAKGwowLNFQVAsDGNXIALWAdfVHqibuFpsGABIoQ5w1XVgldA1ZwxIIVJCW45QVRiJ0sgGhSVM3VCXhARawzqhJSIkk89t4ESR0CuWYQI%2Bke3kjoFCjQfohobB-J5SUTBplcFmd0hZfTwDFzkOskZKhxkUCeLOrp8zelLPgbIQZMyQAAFVhCCA4AAeTQAAWTwBgHAABXfgeBfBPu4AANV8AAWxENwHISyAC0vQ1lQAEE%2BjdagfDMAkEs1ZoBBAABNuDanxCehdvSiAcAAJ5sDfbMx9qA4NAA
; calculate RdsMax = (v-bus-min - v-out-min) / i-out-min 5.0 - 4.5 / 0.025 = 20 ohm
; https://www.digikey.com/en/products/filter/transistors-fets-mosfets-single/278?s=N4IgjCBcoGwAwyqAxlAZgQwDYGcCmANCAPZQDaIAzABwCsYclIAukQA4AuUIAyhwE4BLAHYBzEAF8i8akhCpImXIRLkQAJgDsmgJzVNIIup1h11REZ3q4AFgiWdMHQenVqNpq-e1DId3FoXPxsA2SJzdRsLEB04BGiTTXdfHRtAsPA4ygZfBlp3DLAim2SiYvobXLA0sB8y2sodT3AwajBKZqLYmHVckJt1OvB%2B9WjqhsKauj7qQfthuiLc2gCTZbhqDuWnAe3UztodyrL4Sjtc092TuE0YMZ6OuAubD2PwWbMxuhtNIdbNShOXLURwbXJWRy9Mp6ALzawbLS%2BdTtUbRZG0KxPIxgTQ4qEaVq0EJI5FaOFzWZIwG-ZrqamBJEhVpvSJwVpoux02kDBDc7LORkeIFGKIlHRI2j5fISqXioz5W5DQY6WIZZWxOUaGB5fGjOm4pEPTQsmBnQG%2BEraayGmypJWaYzSohpVIwFkOyFI7QDTWfdTGJEgkFokx3N5dK1VZwAqPaIZpQ7NBMweOSu4WyUYi12NbOlbGi2bUogH7R3wrWJDWhmMDRF1RKs1jKS0Lllba8svErl42NQtgHQMoiBF7zDF0jKW25veBWeazum%2BHoAv4wW7tfuDzpr7Wr9djQY3P6RVJBUxr1q5UYO%2Bbnh340zubRXpLpsrGfS37JE8MdTm5DpAIAqI4HxKJaw7MozngP5oIQAD4CWKCHQdJE2QeTdDjQ2tsmw01OlxNwz0ItxcgdYNN27MpyJVMjjDiMjGjXMjbVNFjnAfW4NlvLjzDIlCsXAK0Y2o2YYEKJItHDXRVmBLJBNaLJOL0S8jC0awghKAd6BJG8lXUnE0NoM5fQCSgdKMBAAk0-QARZBBqHgyzxJySzjWrNDZheTzBiVOArBEjR-K0NUGCKWkwsM7EHKVBhxN9H47MZbQaGS40bO0aoqW4wS6W43VskoXQqXaYs6QHG4So1Klyt9SgzANIx6v0NFmuYproMnUZ-KVP9Aq5KIgjpJkWTOHMqVtSIJvMXK7jMNU7koWwLW61IJQYVD5VqKKNGrH41T2xyJWMN9duMYr5UBRFLtNOEiXQiUQmRR6BjRH9rt2n5znlL6WUc3E0X%2Bs5CytJUnDMWbHA3IwnG1OtbJ6Q0VTaJG9DRTRbGhks4ZTL1bH9L0USG3F6t9XEAVyh0AhZJoVyRWmLI0BndVmKxAeMcyQeNXLNnoJNYhKP6XgDIx3A8FmVhFjQ6EYQHqySXwlttAJFdsaqiCVppfUcbI1R161LBTSV6aN7WMaopmMeNywAVGenbkay3EntzF6baAtLH8EN3CQkAHR%2BZp-YVoh-eLB0Vgyf3vpLNpByGI39CXfJfZTWZ521C27mMt5dFs3xc8pEO9FzP2VSykP5fxX5q-zwJ4FrnX89NYO-HE4lwnE5880cj7ZjM3xZkaDIxLY8JUTeVm%2BKIOcPBSZEu78Gb8TcGCB9iTaY8y-FHCzlI7kdneQT3jGEnM2JclA4zOkvwK9FLFIClvG4wwv7QnMyH52syYzaiqZE9AvoOA2mQgG3lqFYTo7RbZRheJMawo9hjWHPmUKIkQ-higugsMufRYigT6OJI6KCT6FHoJmZYtREZlB-Ag2omwW60KessfIjhthLVvNqcKFwig7RwopLhPsLjGWeicbOq4eimAuG6d%2BrRzLANaNUC27I6QPjcBVcENAzDqM2JqV4eg-iOFtHCNkIRcoKLwdibQLC1KgW8mpAcaQSTCzRJEAYQ1Bg1yanGbkvIlR2G1LlQ4PRZrjBNNWCRRhbjuy9EkLMET9C2OlifOE%2BgEC6hVBieYbCPCCSWrrfE4l6CCQxto-O1hYl%2BwdAguhpFp5pASUUaykxSF1iCecVgIBODcD4EIMQkhpASOgPIdA2B8BEFIJACg1RzKFxABiQE0QeibEEuI%2BpFJOjQQAchDoYxcSemoktRgLF%2B7UWXDsxZnFTQMWonZP4uh2gERMFEOS-lOiOX8kEFY5kMZGRCGiBA4w0K-FrIC6saoXmpWivYpExQdrlQDjVFUo1YEmicL8dagRdQ-yuZ9DYb07BglFgwW0gYdQkpuAtJoWwIkIASVoGl9oEBEjximIadpKFMzSAg4wnKQyctZZyvWaQF7ctXqLUY1tpbGDWqLbIA5Ay-OSSEb5osQgoxVRsX0PsVYqqiGqJ8mCzBRHEqrasEKqABFZCa%2BaJsMSsruNqy2-kaYAk2Zbf8NsBhgU2CUXKehkRFMaA6l1rk-aNHLqG52IdGiz2kBksCgQTDpxxNERy20B5smMum2oE82SEL8GyaVJZRgDkDomII1cF7ThDfoM4y8VzNBreymttwB4AhbjWxO086QrDnuZIYECD4Tn7XSWi4R9ACnCCYYBIIAXTwxsDOdjAgjOEYBkFdVwYjmzeCu6Yc6GCCSaEbC%2B9U0VlEYGYTUDBSaXsYB0Nd-h%2B0y3DAiTBDBZibAvpsc0Z7vXPu9WMWwbRr5aWfSUAmZ76CaPqC4%2BYPxJbhlMGkQoiHApFEiB%2Bs9frL21kiA%2BHDCShXqxaIsnRzDhTEY-IWAWCltJTxaIOEuXRxxRlOBmYMyHISQNxP5KobbwweDNH0DoHthh3s6AJqxonGiXteFNFBtaZNmgfK8Bd4AaBlhQaaU61Rm7oNNIxqI0b8FDwtMaDS%2BCTEWeBSggYTphhaUEuBNc4mrAYeGK5mTEJlM3jrMW7F20uLkNuC5%2Bd6w4iXs%2BRvbNlZliGLeEhldsW5xJfA%2BAUFbJlgglU7Q1It5mHEqocGCLIJlVpZK2MZhna0u4Ii7EVLtQpQkPyJBNLPQhytcGIUbUeouHXl63R2sj4zzdasL1id4BtRsOWM4Dd4D-AXG2duYT4Z8IL0G%2BYLrhxhETa28NxMe5EoXGNFV2sxpXUQUKpIwzwJslfGyWedw2Q7snpu3e177d3ivFvI9xmzJzKvIYKO94ppFxlHMNsm7g5wxuEONDugr6YdNGBDNL4M1Cgr19uyeH4JV0KViI0fRthzHgGo5egW4SScDkxyYEw%2BiBxyJpx9exbpbyumNdCI1ZPdUPldEfDnsNwRRHG-YjGZ4OLLWhPeXKcRuFoTZHJoKtRtvWCV35JXQ0M1LWhbaEu6I4ixRWJVbEKwsZ68GNCyWvpaiMBZKYeqpiUw8YsXsgkuguU4kcENWsUNoW09t7T2KoZTGhnJKu301gTNqWRJzKP1R9LInZxof0OJaTJ8wa8W1JJ-66i5KepPwm1RoPDf6NIds1Kl8LxiOz-oMS4zUrXtxtrcrKjz-6bjdZmHCpoOZXK3eu9FgKkWOq2jWr%2BDhDQfoVIH1T9VVSZw5HWS3F1Eqr%2BkQIIJVrHRtfndGRzCGrZj6kQ%2B%2BMhoBKo-2ORSG-3yblkQutciicH2EUtxV%2Bf0T5EB2d1jQOPlO5JUI4uUACDpjsAljs3pjtgDbR-86E3o6Ehoq8aktRN84Q4YkcYZvcFocRic9Q45DRHRfQeg0Y8C9AhpCC%2BctQDldRLlDkYYDkTQDkCC2FaRLli8WC0Q3RAhZokMUDjI1UtQgliZA1aQXVlcXV2UtAmJ0ZGh%2Bp0pUstBDgaCNBfhusvRlw1Ql8DVIlxsQobhiZ-p1DHJJMQo8gvQ2h34Qo2g9VjFkkM1AZjRfYGpS9Ax3JaR4kmVRZjR394lW94k%2BCL0NVAwNQeYoYlQ6sy8mZ7k0l2gN1jBoiQx2hGZYjARaQmgoVLB%2BRJwQRbAQxnA-CVRJJ6ZcjWVci9ZcjtYYRii%2B5VZbB2s6C7M6jNQslyMskW0NYC1FC2FVRVYKpGjQJtRei9QgglpRh79zUPBC0nBBslwTAZlJjd0QBwZf4Q5GA0C-ZeR5gT5VNikqtcQzAkx3AmgilHwc4ARE8UoN4UpyCUpkEKlpD84XVNRvQnc-ZB5NRClYd84sjHjUgg0fjNQfYoNgg01wg-FBIfYqk7A3MfUpjwhAh3C-A64hh4cv54dEDzB4Bl02Rw1YhTBt42QY8YgM0D0HI11uF5gTBu8UhSpNQZjidXRo42dyTOcUhBoaTdVn1siFI4hwIL5AMuTAMHxuTJN90wkL4LsxS7gAMIJCgC0ioL5mEb0MlFTksIMrBn1KkwFGU8MEA89uEGoqhtoxgighEDTs5TSCTuFjIzxjSzVyhWiWghVkMQJIFwI-hs16t5FykihLCEM%2B48MiJlMAhE9qhrJxNGk%2BhQgzxfl6toywzlwIzCC%2BgGtJgKEFJS9ni49mt1gUw8tGUKtTAeFs57TahRcDhikHxTg3QLhu1L03RBpnhDEGzRsTgXhVjaxWzhs0gHUnMRMIJilJFdiBzrMJsMYbjTt-JvsXF0cP9pywN%2BxihgQC9gRa88clYxclosJoR8g5C4gZo5cIgMw444RwEPJrF2hyQ4iSRGhldBhk8SRqwpY6RH9aRAQmhRpH9epH8hpXyYifzWodg1RXye0monBM0QKoc59k1GRTBTyNBxYLZfIXdEK3NkK3oMQqtELddJQVRMV4BicEtNDCl1Czshpwcz9wdxDwdHZPgiolRwcZkaLtDVRXUpVIgcjDxCjBhohhjrU2jZFjwbgn9wANICthKjxwwNJyMCKHwNIRNPUhKhVv0Y5FlCxm5VLo4ShHdVL65nR0TYN0TMi1xHNzAW5Xor1TMPB4xBxsVjI2RBJbLVJZlOjyxckxxckqwiQ69ZlPK3iiQ6NJQxQ2xbRmwiQgcBN5ZOw4Sew3QPkX8xwfjogMRjkFjihtw6ApZN8iR1lNcAJpldRQJAR7J9RpcJwNcR1L1gtUM7kbj-Q2hq9qZcJnJWhl9cFcplZsD2qEocTNIlpvAqQlovLrxOEYYSZXCihSs6UkpLAhdtYfgMtprzZ6Y5rZrcQaYfgliOUAYTVAR4x1wsZ7Czi7ALjISNjISgh4lmy-AzskSzth4zt-jfg6S0EEhyYZSzgvSbcWs0NJQDB2lOlIBeABARBxApAYgsxBkFAlBRlVAJlwAWB2AuAAbulga%2BlhLzQIbhllAxk1BrA6AuVkQ7BRoMYNquKAgwY0F3R6pgEtBfhNzpY3R6pAw6zXCOC-oYrWVgpQiIRfVUjMk7khhhjLt3wNhixTANVCgkFo4xafdhbQQrx-JEDPUZkhVE9CNNIfgPpLRhzLRttLQN09aMowLN5YLLQvKSgolnQwDywbTrbax7Lshicf4KdMwgc0wFcMRxZyx9h5xcTHNAgFElwOYFkOZaz4kVt9B4TN8l8Lg3BpECEMyCFHLN8SkTgV5Q7VEY6TAFJ4oMrbzbTBgDkrxQKJLQKzxRgGMXx5crx9A5E2E%2BD2hc1CgeKm6CrfwCr1lrAMr7dBwAJkRMd6oYKAJjSzxtlzcoIrpL0zgxIEJSQZ6Sa%2BiMLQIMYFIqZ-NV6CII8JIpEt7YEyI3QWtarqxm94d9J0ryQ6AWK-QNdvh7I6BM0-rEbAaekQboQj4MbFARkVBxkKAngH6ukgbelQb4FZBBl-qQAABVYQQQDgAAeTQAAFk8AMAcAABXfgPAXwFB7gAANV8AAFsRBuAchQaABaXod%2BgQFBr%2BtQHwZgCQUGxAQZQQAAE24BUIRv-uft8A4AAE82AMGAbkHUB6GgA
; Filter Vgs(th) Max = top 2 voltage levels that are smaller than [v-bus-min - 0.5] = 4.5 (all meet this)
; https://www.digikey.com/en/products/filter/transistors-fets-mosfets-single/278?s=N4IgjCBcoGwAwyqAxlAZgQwDYGcCmANCAPZQDaIAzABwCsYclIAukQA4AuUIAyhwE4BLAHYBzEAF8i8akhCpImXIRLkQAJgDsmgJzVNIIup1h11REZ3q4AFgiWdMHQenVqNpq-e1DId3FoXPxsA2SJzdRsLEB04BGiTTXdfHRtAsPA4ygZfBlp3DLAim2SiYvobXLA0sB8y2sodT3AwajBKZqLYmHVckJt1OvB%2B9WjqhsKauj7qQfthuiLc2gCTZbhqDuWnAe3UztodyrL4Sjtc092TuE0YMZ6OuAubD2PwWbMxuhtNIdbNShOXLURwbXJWRy9Mp6ALzawbLS%2BdTtUbRZG0KxPIxgTQ4qEaVq0EJI5FaOFzWZIwG-ZrqamBJEhVpvSJwVpoux02kDBDc7LORkeIFGKIlHRI2j5fISqXioz5W5DQY6WIZZWxOUaGB5fGjOm4pEPTQsmBnQG%2BEraayGmypJWaYzSohpVIwFkOyFI7QDTWfdTGJEgkFokx3N5dK1VZwAqPaIZpQ7NBMweOSu4WyUYi12NbOlbGi2bUogH7R3wrWJDWhmMDRF1RKs1jKS0Lllba8svErl42NQtgHQMoiBF7zDF0jKW25veBWeazum%2BHoAv4wW7tfuDzpr7Wr9djQY3P6RVJBUxr1q5UYO%2Bbnh340zubRXpLpsrGfS37JE8MdTm5DpAIAqI4HxKJaw7MozngP5oIQAD4CWKCHQdJE2QeTdDjQ2tsmw01OlxNwz0ItxcgdYNN27MpyJVMjjDiMjGjXMjbVNFjnAfW4NlvLjzDIlCsXAK0Y2o2YYEKJItHDXRVmBLJBNaLJOL0S8jC0awghKAd6BJG8lXUnE0NoM5fQCSgdKMBAAk0-QARZBBqHgyzxJySzjWrNDZheTzBiVOArBEjR-K0NUGCKWkwsM7EHKVBhxN9H47MZbQaGS40bO0aoqW4wS6W43VskoXQqXaYs6QHG4So1Klyt9SgzANIx6v0NFmuYproMnUZ-KVP9Aq5KIgjpJkWTOHMqVtSIJvMXK7jMNU7koWwLW61IJQYVD5VqKKNGrH41T2xyJWMN9duMYr5UBRFLtNOEiXQiUQmRR6BjRH9rt2n5znlL6WUc3E0X%2Bs5CytJUnDMWbHA3IwnG1OtbJ6Q0VTaJG9DRTRbGhks4ZTL1bH9L0USG3F6t9XEAVyh0AhZJoVyRWmLI0BndVmKxAeMcyQeNXLNnoJNYhKP6XgDIx3A8FmVhFjQ6EYQHqySXwlttAJFdsaqiCVppfUcbI1R161LBTSV6aN7WMaopmMeNywAVGenbkay3EntzF6baAtLH8EN3CQkAHR%2BZp-YVoh-eLB0Vgyf3vpLNpByGI39CXfJfZTWZ521C27mMt5dFs3xc8pEO9FzP2VSykP5fxX5q-zwJ4FrnX89NYO-HE4lwnE5880cj7ZjM3xZkaDIxLY8JUTeVm%2BKIOcPBSZEu78Gb8TcGCB9iTaY8y-FHCzlI7kdneQT3jGEnM2JclA4zOkvwK9FLFIClvG4wwv7QnMyH52syYzaiqZE9AvoOA2mQgG3lqFYTo7RbZRheJMawo9hjWHPmUKIkQ-higugsMufRYigT6OJI6KCT6FHoJmZYtREZlB-Ag2omwW60KessfIjhthLVvNqcKFwig7RwopLhPsLjGWeicbOq4eimAuG6d%2BrRzLANaNUC27I6QPjcBVcENAzDqM2JqV4eg-iOFtHCNkIRcoKLwdibQLC1KgW8mpAcaQSTCzRJEAYQ1Bg1yanGbkvIlR2G1LlQ4PRZrjBNNWCRRhbjuy9EkLMET9C2OlifOE%2BgEC6hVBieYbCPCCSWrrfE4l6CCQxto-O1hYl%2BwdAguhpFp5pASUUaykxSF1iCecVgIBODcD4EIMQkhpASOgPIdA2B8BEFIJACg1RzKFxABiQE0QeibEEuI%2BpFJOjQQAchDoYxcSemoktRgLF%2B7UWXDsxZnFTQMWonZP4uh2gERMFEOS-lOiOX8kEFY5kMZGRCGiBA4w0K-FrIC6saoXmpWivYpExQdrlQDjVFUo1YEmicL8dagRdQ-yuZ9DYb07BglFgwW0gYdQkpuAtJoWwIkIASVoGl9oEBEjximIadpKFMzSAg4wnKQyctZZyvWaQF7ctXqLUY1tpbGDWqLbIA5Ay-OSSEb5osQgoxVRsX0PsVYqqiGqJ8mCzBRHEqrasEKqABFZCa%2BaJsMSsruNqy2-kaYAk2Zbf8NsBhgU2CUXKehkRFMaA6l1rk-aNHLqG52IdGiz2kBksCgQTDpxxNERy20B5smMum2oE82SEL8GyaVJZRgDkDomII1cF7ThDfoM4y8VzNBreymttwB4AhbjWxO086QrDnuZIYECD4Tn7XSWi4R9ACnCCYYBIIAXTwxsDOdjAgjOEYBkFdVwYjmzeCu6Yc6GCCSaEbC%2B9U0VlEYGYTUDBSaXsYB0Nd-h%2B0y3DAiTBDBZibAvpsc0Z7vXPu9WMWwbRr5aWfSUAmZ76CaPqC4%2BYPxJbhlMGkQoiHApFEiB%2Bs9frL21kiA%2BHDCShXqxaIsnRzDhTEY-IWAWCltJTxaIOEuXRxxRlOBmYMyHISQNxP5KobbwweDNH0DoHthh3s6AJqxonGiXteFNFBtaZNmgfK8Bd4AaBlhQaaU61Rm7oNNIxqI0b8FDwtMaDS%2BCTEWeBSggYTphhaUEuBNc4mrAYeGK5mTEJlM3jrMW7F20uLkNuC5%2Bd6w4iXs%2BRvbNlZliGLeEhldsW5xJfA%2BAUFbJlgglU7Q1It5mHEqocGCLIJlVpZK2MZhna0u4Ii7EVLtQpQkPyJBNLPQhytcGIUbUeouHXl63R2sj4zzdasL1id4BtRsOWM4Dd4D-AXG2duYT4Z8IL0G%2BYLrhxhETa28NxMe5EoXGNFV2sxpXUQUKpIwzwJslfGyWedw2Q7snpu3e177d3ivFvI9xmzJzKvIYKO94ppFxlHMNsm7g5wxuEONDugr6YdNGBDNL4M1Cgr19uyeH4JV0KViI0fRthzHgGo5egW4SScDkxyYEw%2BiBxyJpx9exbpbyumNdCI1ZPdUPldEfDnsNwRRHG-YjGZ4OLLWhPeXKcRuFoTZHJoKtRtvWCV35JXQ0M1LWhbaEu6I4ixRWJVbEKwsZ68GNCyWvpaiMBZKYeqpiUw8YsXsgkuguU4kcENWsUNoW09t7T2KoZTGhnJKu301gTNqWRJzKP1R9LInZxof0OJaTJ8wa8W1JJ-66i5KepPwm1RoPDf6NIds1Kl8LxiOz-oMS4zUrXtxtrcrKjz-6bjdZmHCpoOZXK3eu9FgKkWOq2jWr%2BDhDQfoVIH1T9VVSZw5HWS3F1Eqr%2BkQIIJVrHRtfndGRzCGrZj6kQ%2B%2BMhoBKo-2ORSG-3yblkQutciicH2EUtxV%2Bf0T5EB2d1jQOPlO5JUI4uUACDpjsAljs3pjtgDbR-86E3o6Ehoq8aktRN84Q4YkcYZvcFocRic9Q45DRHRfQeg0Y8C9AhpCC%2BctQDldRLlDkYYDkTQDkCC2FaRLli8WC0Q3RAhZokMUDjI1UtQgliZA1aQXVlcXV2UtAmJ0ZGh%2Bp0pUstBDgaCNBfhusvRlw1Ql8DVIlxsQobhiZ-p1DHJJMQo8gvQ2h34Qo2g9VjFkkM1AZjRfYGpS9Ax3JaR4kmVRZjR394lW94k%2BCL0NVAwNQeYoYlQ6sy8mZ7k0l2gN1jBoiQx2hGZYjARaQmgoVLB%2BRJwQRbAQxnA-CVRJJ6ZcjWVci9ZcjtYYRii%2B5VZbB2s6C7M6jNQslyMskW0NYC1FC2FVRVYKpGjQJtRei9QgglpRh79zUPBC0nBBslwTAZlJjd0QBwZf4Q5GA0C-ZeR5gT5VNikqtcQzAkx3AmgilHwc4ARE8UoN4UpyCUpkEKlpD84XVNRvQnc-ZB5NRClYd84sjHjUgg0fjNQfYoNgg01wg-FBIfYqk7A3MfUpjwhAh3C-A64hh4cv54dEDzB4Bl02Rw1YhTBt42QY8YgM0D0HI11uF5gTBu8UhSpNQZjidXRo42dyTOcUhBoaTdVn1siFI4hwIL5AMuTAMHxuTJN90wkL4LsxS7gAMIJCgC0ioL5mEb0MlFTksIMrBn1KkwFGU8MEA89uEGoqhtoxgighEDTs5TSCTuFjIzxjSzVyhWiWghVkMQJIFwI-hs16t5FykihLCEM%2B48MiJlMAhE9qhrJxNGk%2BhQgzxfl6toywzlwIzCC%2BgGtJgKEFJS9ni49mt1gUw8tGUKtTAeFs57TahRcDhikHxTg3QLhu1L03RBpnhDEGzRsTgXhVjaxWzhs0gHUnMRMIJilJFdiBzrMJsMYbjTt-JvsXF0cP9pywN%2BxihgQC9gRa88clYxclosJoR8g5C4gZo5cIgMw444RwEPJrF2hyQ4iSRGhldBhk8SRqwpY6RH9aRAQmhRpH9epH8hpXyYifzWodg1RXye0monBM0QKoc59k1GRTBTyNBxYLZfIXdEK3NkK3oMQqtELddJQVRMV4BicEtNDCl1Czshpwcz9wdxDwdHZPgiolRwcZkaLtDVRXUpVIgcjDxCjBhohhjrU2jZFjwbgn9wANICthKjxwwNJyMCKHwNIRNPUhKhVv0Y5FlCxm5VLo4ShHdVL65nR0TYN0TMi1xHNzAW5Xor1TMPB4xBxsVjI2RBJbLVJZlOjyxckxxckqwiQ69ZlPK3iiQ6NJQxQ2xbRmwiQgcBN5ZOw4Sew3QPkX8xwfjogMRjkFjihtw6ApZN8iR1lNcAJpldRQJAR7J9RpcJwNcR1L1gtUM7kbj-Q2hq9qZcJnJWhl9cFcplZsD2qEocTNIlpvAqQlovLrxOEYYSZXCihSs6UkpLAhdtYfgMtprzZ6Y5rZrcQaYfgliOUAYTVAR4x1wsZ7Czi7ALjISNjISgh4lmy-AzskSzth4zt-jfg6S0EEhyYZSzgvSbcWs0NJQDB2lOlIBeABARBxApAYgsxBkFAlBRlVAJlwAWB2AuAAbulga%2BlhLzQIbhllAxk1BrA6AuVkQ7BRoMYNquKAgwY0F3R6pgEtBfhNzpY3R6pAw6zXCOC-oYrWVgpQiIRfVUjMk7khhhjLt3wNhixTANVCgkFo4xafdhbQQrx-JEDPUZkhVE9CNNIfgPpLRhzLRttLQN09aMowLN5YLLQvKSgolnQwDywbTrbax7Lshicf4KdMwgc0wFcMRxZyx9h5xcTHNAgFElwOYFkOZaz4kVt9B4TN8l8Lg3BpECEMyCFHLN8SkTgV5Q7VEY6TAFJ4oMrbzbTBgDkrxQKJLQKzxRgGMXx5crx9A5E2E%2BD2hc1CgeKm6CrfwCr1lrAMr7dBwAJkRMd6oYKAJjSzxtlzcoIrpL0zgxIEJSQZ6Sa%2BiMLQIMYFIqZ-NV6CII8JIpEt7YEyI3QWtarqxm94d9J0ryQ6AWK-QNdvh7I6BM0-rEbAaekQboQj4MbFARkVBxkKAngH6ukgbelQb4FZBBl-qQAABVYQQQDgAAeTQAAFk8AMAcAABXfgPAXwFB7gAANV8AAFsRBuAchQaABaXod%2BgQFBr%2BtQHwZgUh8UCh-gKh7G2GiAOh0GxAQZQQAAE24BUIRv-uft8A4AAE82AMGAbuGcBUAJAJAgA
; filter RdsOn = highest value under RdsMax & Power Dissipation (Max) > i-out * i-out * RdsOn (Watt)
; Good:
; https://www.digikey.com/en/products/detail/microchip-technology/TP2635N3-G/4902387
; https://www.digikey.com/en/products/detail/microchip-technology/TP2435N8-G/4902961
; Bad: (max wattage is too low)
; https://www.digikey.com/en/products/detail/diodes-incorporated/ZVP3310A/92627

; if optimize for area / weight: ; WE CAN'T DO THIS W/OUT PACKAGE INFO
; filter in-stock solution for Vgsmax >= v-bus-max
; if none exists, remove filter
